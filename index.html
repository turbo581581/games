<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>Shoe Dog åˆ›ä¸šæ¨¡æ‹Ÿ - ç½‘é¡µç‰ˆ</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background: #0f172a;
      color: #e5e7eb;
      margin: 0;
      padding: 0;
    }
    .container {
      max-width: 1100px;
      margin: 0 auto;
      padding: 24px 16px 64px;
      display: flex;
      gap: 24px;
    }
    .card {
      background: #020617;
      border-radius: 16px;
      padding: 20px 24px;
      box-shadow: 0 18px 40px rgba(0,0,0,0.5);
      border: 1px solid #1f2937;
    }
    .left {
      flex: 2;
    }
    .right {
      flex: 1;
    }
    h1 {
      margin: 0 0 16px;
      font-size: 24px;
      color: #f97316;
    }
    h2 {
      margin: 0 0 8px;
      font-size: 18px;
    }
    .question-id {
      font-size: 14px;
      color: #9ca3af;
      margin-bottom: 4px;
    }
    .question-text {
      font-size: 18px;
      margin-bottom: 16px;
      line-height: 1.6;
    }
    .option-list {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-top: 8px;
    }
    .option-btn {
      text-align: left;
      border-radius: 999px;
      border: 1px solid #374151;
      padding: 10px 14px;
      background: #020617;
      color: #e5e7eb;
      cursor: pointer;
      font-size: 14px;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: background 0.15s ease, transform 0.1s ease, box-shadow 0.1s ease;
    }
    .option-btn span.key {
      display: inline-flex;
      justify-content: center;
      align-items: center;
      width: 22px;
      height: 22px;
      border-radius: 999px;
      background: #111827;
      border: 1px solid #4b5563;
      font-weight: 600;
      font-size: 12px;
      color: #f97316;
    }
    .option-btn:hover {
      background: #111827;
      transform: translateY(-1px);
      box-shadow: 0 10px 25px rgba(15,23,42,0.8);
    }
    .badge {
      display: inline-flex;
      align-items: center;
      padding: 3px 8px;
      border-radius: 999px;
      font-size: 11px;
      border: 1px solid #4b5563;
      color: #9ca3af;
      gap: 6px;
    }
    .badge-dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: #22c55e;
    }
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 10px;
      margin-top: 8px;
    }
    .stat {
      padding: 8px 10px;
      border-radius: 10px;
      background: #020617;
      border: 1px solid #1f2937;
      font-size: 13px;
    }
    .stat-label {
      display: flex;
      justify-content: space-between;
      margin-bottom: 4px;
      color: #9ca3af;
    }
    .stat-value {
      font-size: 16px;
      font-weight: 600;
    }
    .pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 9px;
      border-radius: 999px;
      background: #0b1220;
      border: 1px solid #1f2937;
      font-size: 12px;
      color: #9ca3af;
      margin-bottom: 8px;
    }
    .pill span.dot {
      width: 6px;
      height: 6px;
      border-radius: 999px;
      background: #22c55e;
    }
    .log {
      margin-top: 12px;
      padding-top: 8px;
      border-top: 1px dashed #1f2937;
      font-size: 12px;
      color: #9ca3af;
      max-height: 180px;
      overflow-y: auto;
    }
    .footer {
      text-align: center;
      font-size: 12px;
      color: #6b7280;
      margin-top: 12px;
    }
    .result-title {
      font-size: 20px;
      margin-bottom: 6px;
      color: #facc15;
    }
    .result-text {
      font-size: 14px;
      line-height: 1.6;
      color: #e5e7eb;
      white-space: pre-line;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="card left">
      <h1>Shoe Dog åˆ›ä¸šæ¨¡æ‹Ÿ</h1>
      <div class="pill">
        <span class="dot"></span>
        <span id="round-info">ç¬¬ 1 å…³ / å…± 11 å…³</span>
      </div>
      <div class="question-id" id="question-id"></div>
      <div class="question-text" id="question-text"></div>
      <div class="option-list" id="option-list"></div>

      <div class="log" id="log"></div>

      <div class="footer">
        æ¯æ¬¡é€‰æ‹©éƒ½ä¼šæ”¹å˜ä½ çš„ç°é‡‘ã€ä¾›åº”é“¾ã€å“ç‰Œã€å›¢é˜Ÿã€æˆé•¿ä¸é£é™©ã€‚<br/>
        é€šå…³åçœ‹çœ‹ä½ æ˜¯ï¼šç ´äº§ã€åŒºåŸŸå°å‚ã€ä¸­å›½è€å…‹ï¼Œè¿˜æ˜¯è¶…è¶Šè€å…‹ã€‚
      </div>
    </div>

    <div class="card right">
      <h2>å½“å‰åˆ›ä¸šçŠ¶æ€</h2>
      <div class="stats-grid">
        <div class="stat"><div class="stat-label"><span>ğŸ’° ç°é‡‘æµ</span></div><div class="stat-value" id="stat-cash">0</div></div>
        <div class="stat"><div class="stat-label"><span>ğŸ“¦ ä¾›åº”é“¾</span></div><div class="stat-value" id="stat-supply">0</div></div>
        <div class="stat"><div class="stat-label"><span>ğŸ§² å“ç‰ŒåŠ›</span></div><div class="stat-value" id="stat-brand">0</div></div>
        <div class="stat"><div class="stat-label"><span>ğŸ§‘â€ğŸ¤â€ğŸ§‘ å›¢é˜Ÿå£«æ°”</span></div><div class="stat-value" id="stat-team">0</div></div>
        <div class="stat"><div class="stat-label"><span>ğŸ“ˆ æˆé•¿é€Ÿåº¦</span></div><div class="stat-value" id="stat-growth">0</div></div>
        <div class="stat"><div class="stat-label"><span>ğŸŒª é£é™©æŒ‡æ•°</span></div><div class="stat-value" id="stat-risk">0</div></div>
      </div>

      <div id="result-block" style="margin-top:16px; display:none;">
        <div class="result-title" id="result-title"></div>
        <div class="result-text" id="result-text"></div>
      </div>
    </div>
  </div>

  <script>
    const questions = [
      {
        id: 1,
        text: "æ¯•ä¸šåï¼Œä½ æƒ³å¹²ä»€ä¹ˆï¼Ÿ",
        options: {
          A: {
            text: "å»ä¼šè®¡å¸ˆäº‹åŠ¡æ‰€ä¸Šç­ï¼ˆç¨³å®šå·¥ä½œï¼Œå­¦ä¹ è´¢åŠ¡ï¼‰",
            effects: { cash: 10, growth: 5, risk: -5 }
          },
          B: {
            text: "å»ç¯çƒæ—…è¡Œå¯»æ‰¾çµæ„Ÿï¼ˆå¼€çœ¼ç•Œï¼Œä½†èŠ±é’±ï¼‰",
            effects: { cash: -10, growth: 10, risk: 5, brand: 5 }
          },
          C: {
            text: "åœ¨å®¶å†™å•†ä¸šè®¡åˆ’ä¹¦ï¼ˆç†è®ºå……è¶³ï¼Œå®è·µä¸è¶³ï¼‰",
            effects: { cash: -5, growth: 5 }
          },
          D: {
            text: "éšä¾¿æ··å‡ å¹´ï¼ˆå®‰å…¨ä½†æµªè´¹æ—¶é—´ï¼‰",
            effects: { growth: -5, risk: -5 }
          }
        }
      },
      {
        id: 2,
        text: "ä½ èŒç”Ÿäº†åšè·‘é‹ç”Ÿæ„çš„æƒ³æ³•ï¼Œè¦ä¸è¦å»æ—¥æœ¬è°ˆä»£ç†ï¼Ÿ",
        options: {
          A: {
            text: "ç«‹åˆ»é£æ—¥æœ¬ï¼Œç¡¬åˆšæ‹œè®¿ä¾›åº”å•†",
            effects: { cash: -10, growth: 10, risk: 5, brand: 5 }
          },
          B: {
            text: "å†™é‚®ä»¶ç­‰å¯¹æ–¹å›å¤ï¼ˆå®‰å…¨ä½†èŠ‚å¥æ…¢ï¼‰",
            effects: { risk: -5, growth: -5 }
          },
          C: {
            text: "ä¸å»ï¼Œæ—¥æœ¬å¤ªè¿œå¤ªè´µï¼ˆæ”¾å¼ƒæœºä¼šï¼‰",
            effects: { growth: -10 }
          },
          D: {
            text: "å€Ÿé’±é£æ—¥æœ¬ï¼ˆé«˜é£é™©é«˜å›æŠ¥ï¼‰",
            effects: { cash: -20, growth: 15, risk: 10, brand: 5 }
          }
        }
      },
      {
        id: 3,
        text: "ä¾›åº”å•†é—®ï¼šä½ ä»¬å…¬å¸æœ‰å¤šå¤§ï¼Ÿå…¶å®å°±ä½ ä¸€ä¸ªäººï¼Œä½ æ€ä¹ˆå›ç­”ï¼Ÿ",
        options: {
          A: {
            text: "è€å®è¯´åªæœ‰æˆ‘ä¸€ä¸ªäººï¼ˆè¯šä¿¡ä½†è°ˆåˆ¤åŠ›å·®ï¼‰",
            effects: { supply: -5, brand: -2, risk: -5 }
          },
          B: {
            text: "æ¨¡ç³Šå›ç­”ï¼šæˆ‘ä»¬åœ¨ç¾å›½æœ‰é”€å”®ç½‘ç»œ",
            effects: { supply: 5, risk: 5, brand: 2 }
          },
          C: {
            text: "å¹ç‰›ï¼šæˆ‘ä»¬æ˜¯ç¾å›½å¤§å‹åˆ†é”€å•†",
            effects: { supply: 10, risk: 15, brand: 5 }
          },
          D: {
            text: "åé—®å¯¹æ–¹å¸‚åœºè§„åˆ’ï¼Œä¾§é¢å±•ç°ä¸“ä¸šåº¦",
            effects: { supply: 5, growth: 5, brand: 3 }
          }
        }
      },
      {
        id: 4,
        text: "ç¬¬ä¸€æ‰¹é‹åˆ°ç¾å›½äº†ï¼Œä½ æ‰“ç®—æ€ä¹ˆå–ï¼Ÿ",
        options: {
          A: {
            text: "è‡ªå·±å¼€è½¦è·‘æ ¡å›­ï¼Œä¸€åŒä¸€åŒåœ°å–",
            effects: { brand: 15, cash: 5, growth: 10, team: 5, risk: -5 }
          },
          B: {
            text: "æ‰¾é›¶å”®åº—é“ºé“ºè´§ï¼ˆæ‰¹å‘ä¸ºä¸»ï¼‰",
            effects: { cash: 10, supply: 5, brand: 5 }
          },
          C: {
            text: "è®©æœ‹å‹å¸®å¿™å–ï¼ˆè½»æ¾ä½†ä¸å¯æ§ï¼‰",
            effects: { cash: 5, team: 5, risk: 5 }
          },
          D: {
            text: "ç ¸å¹¿å‘Šæ¨å¹¿ï¼ˆå¿«é€Ÿæ‰“å“åæ°”ï¼‰",
            effects: { cash: -15, brand: 15, risk: 5 }
          }
        }
      },
      {
        id: 5,
        text: "é”€é‡å¼€å§‹èµ·æ¥ï¼Œä½†ç°é‡‘å‘¨è½¬ä¸è¿‡æ¥ï¼Œä½ æ€ä¹ˆåŠï¼Ÿ",
        options: {
          A: {
            text: "å‘é“¶è¡Œç”³è¯·è´·æ¬¾ï¼ˆæ­£è·¯ï¼Œä½†èƒŒè´Ÿå€ºåŠ¡ï¼‰",
            effects: { cash: 30, risk: 10, supply: 10, brand: 5, growth: 5 }
          },
          B: {
            text: "å‘çˆ¶æ¯å€Ÿé’±ï¼ˆå¿«é€Ÿä½†å‹åŠ›åœ¨å®¶åº­ï¼‰",
            effects: { cash: 15, team: -5, risk: 5 }
          },
          C: {
            text: "åˆ·ä¿¡ç”¨å¡é€æ”¯ï¼ˆéå¸¸å±é™©ï¼‰",
            effects: { cash: 20, risk: 20 }
          },
          D: {
            text: "åœä¸‹æ‰©å¼ ï¼Œæ…¢æ…¢å–ï¼ˆä¿å®ˆï¼‰",
            effects: { growth: -10, risk: -10, supply: -5 }
          }
        }
      },
      {
        id: 6,
        text: "ä½ é‡åˆ°äº†ç–¯å­å‹é”€å”® Johnsonï¼Œä½ å¦‚ä½•ç®¡ç†ä»–ï¼Ÿ",
        options: {
          A: {
            text: "æ”¾æ‰‹è®©ä»–è‡ªç”±å‘æŒ¥ï¼ˆé«˜å¢é•¿é«˜æ··ä¹±ï¼‰",
            effects: { brand: 15, team: 10, cash: 10, growth: 10, risk: 5, supply: -5 }
          },
          B: {
            text: "è®¾å®šä¸¥æ ¼ KPI è¿›è¡Œç®¡æ§",
            effects: { brand: 0, team: -5, cash: 5, growth: 5, risk: -5 }
          },
          C: {
            text: "è®©ä»–è´Ÿè´£é‡ç‚¹å®¢æˆ·ï¼Œæœ‰é™åº¦åœ°æ”¾æƒ",
            effects: { brand: 10, team: 5, cash: 5, growth: 5 }
          },
          D: {
            text: "è§‰å¾—å¤ªéš¾ç®¡ï¼Œå¹²è„†å¼€é™¤ä»–",
            effects: { brand: -10, team: -5, growth: -5 }
          }
        }
      },
      {
        id: 7,
        text: "ä¾›åº”é“¾ç¬¬ä¸€æ¬¡å‡ºç°æ–­è´§é£é™©ï¼Œä½ æ€ä¹ˆåŠï¼Ÿ",
        options: {
          A: {
            text: "å‘ç°æœ‰ä¾›åº”å•†æ–½å‹ï¼Œé€¼ä»–ä¼˜å…ˆç»™ä½ äº§èƒ½",
            effects: { supply: -5, risk: 5, brand: -2 }
          },
          B: {
            text: "è‡ªå·±å†æ‰¾ä¸€å®¶ä¾›åº”å•†ï¼Œåšå¤šå…ƒåŒ–å¸ƒå±€",
            effects: { supply: 20, risk: -20, cash: -10, brand: 10, team: 5, growth: 10 }
          },
          C: {
            text: "é€‰æ‹©ç­‰å¾…ï¼Œçœ‹æƒ…å†µå†è¯´",
            effects: { supply: -15, cash: -5, risk: 5 }
          },
          D: {
            text: "åœ¨å…¬å¼€åœºåˆåæ§½ä¾›åº”å•†ï¼Œè®©èˆ†è®ºæ–½å‹",
            effects: { brand: -20, risk: 20 }
          }
        }
      },
      {
        id: 8,
        text: "ç«äº‰å¯¹æ‰‹å¼€å§‹æŠ„è¢­ä½ çš„è®¾è®¡ï¼Œä½ æ€ä¹ˆåŠï¼Ÿ",
        options: {
          A: {
            text: "ç»§ç»­çŒ›åšæ–°å“è¿­ä»£ï¼Œä¿æŒæŠ€æœ¯é¢†å…ˆ",
            effects: { brand: 10, cash: -5, growth: 10, risk: 0 }
          },
          B: {
            text: "æ‰“å®˜å¸ç»´æƒï¼ˆçƒ§é’±ä½†æ ‘ç«‹ç«‹åœºï¼‰",
            effects: { cash: -20, brand: 10, risk: -5, team: 5, growth: 5 }
          },
          C: {
            text: "é é™ä»·è·Ÿå¯¹æ‰‹æ‹¼ä»·æ ¼",
            effects: { cash: -10, brand: -10, risk: 10 }
          },
          D: {
            text: "ä»äº§å“è½¬å‘å¼ºè°ƒå“ç‰Œæ•…äº‹å’Œè¿åŠ¨å‘˜å½¢è±¡",
            effects: { brand: 15, cash: -5, growth: 5 }
          }
        }
      },
      {
        id: 9,
        text: "ä½ çš„è·‘é‹å“ç‰Œé€æ¸æˆåï¼Œè¦ä¸è¦æ‰©å±•å“ç±»ï¼Ÿ",
        options: {
          A: {
            text: "æš‚æ—¶ä¸æ‰©ï¼Œç»§ç»­æ·±è€•è·‘é‹",
            effects: { risk: -15, cash: 10, team: 5, supply: 5, growth: -5 }
          },
          B: {
            text: "æ‰©å±•ç¯®çƒé‹ï¼ŒæŠ¼æ³¨æ–°èµ›é“",
            effects: { growth: 15, cash: -10, risk: 10, brand: 10 }
          },
          C: {
            text: "åšè¿åŠ¨æœè£…ï¼Œå°è¯•æå‡å®¢å•ä»·",
            effects: { brand: 10, cash: -5, risk: 5 }
          },
          D: {
            text: "é‹ã€æœã€é…ä»¶ä¸€èµ·æ‰©ï¼ˆå…¨çº¿å¼€ç«ï¼‰",
            effects: { growth: 20, cash: -20, risk: 20 }
          }
        }
      },
      {
        id: 10,
        text: "æ¬§æ´²æ¸ é“å•†æ‰¾ä¸Šé—¨ï¼Œä½ ç¬¬ä¸€æ¬¡è¿æ¥å…¨çƒåŒ–æœºä¼šï¼Œæ€ä¹ˆåšï¼Ÿ",
        options: {
          A: {
            text: "å°è§„æ¨¡è‡ªè¥è¯•æ°´ï¼Œæ…¢æ…¢æ‘¸ç´¢",
            effects: { growth: 10, cash: -10, risk: 5, brand: 5 }
          },
          B: {
            text: "å¤§è§„æ¨¡è¿›å…¥ï¼Œé‡ä»“æ¬§æ´²å¸‚åœº",
            effects: { growth: 20, cash: -20, risk: 20, brand: 15 }
          },
          C: {
            text: "æ‰¾å½“åœ°ä»£ç†åšï¼Œè½»èµ„äº§å…¨çƒåŒ–",
            effects: { supply: 10, risk: -10, brand: 15, growth: 10, team: 5 }
          },
          D: {
            text: "æš‚ç¼“ï¼Œè§‰å¾—æ—¶æœºæœªåˆ°",
            effects: { growth: -5, risk: -5 }
          }
        }
      },
      {
        id: 11,
        text: "æŠ•èµ„äººé—®ï¼šè¦ä¸è¦ç°åœ¨å°±ä¸Šå¸‚ï¼Ÿ",
        options: {
          A: {
            text: "ç«‹åˆ»ä¸Šå¸‚ï¼Œæ‹¿é’±ã€æ‰©å¼ ï¼",
            effects: { cash: 50, risk: 20, brand: 10, growth: 15 }
          },
          B: {
            text: "å†ç­‰ä¸€å¹´ï¼ŒæŠŠåŸºç¡€æ‰“ç¨³å†ä¸Šå¸‚",
            effects: { risk: -10, brand: 10, team: 10, growth: 5, supply: 5 }
          },
          C: {
            text: "å…ˆå†èä¸€è½®ç§å‹Ÿï¼Œæš‚ä¸ä¸Šå¸‚",
            effects: { cash: 20, risk: 5, growth: 5 }
          },
          D: {
            text: "æ‹’ç»ä¸Šå¸‚ï¼Œä¿æŒç»å¯¹æ§åˆ¶æƒ",
            effects: { risk: -5, brand: 0, growth: -5 }
          }
        }
      }
    ];

    const state = {
      cash: 0,
      supply: 0,
      brand: 0,
      team: 0,
      growth: 0,
      risk: 0,
      history: []
    };

    let currentIndex = 0;

    function updateStatsView() {
      document.getElementById("stat-cash").textContent = state.cash;
      document.getElementById("stat-supply").textContent = state.supply;
      document.getElementById("stat-brand").textContent = state.brand;
      document.getElementById("stat-team").textContent = state.team;
      document.getElementById("stat-growth").textContent = state.growth;
      document.getElementById("stat-risk").textContent = state.risk;
    }

    function isBankrupt() {
      if (state.cash < -10) {
        return "ç°é‡‘æµå½»åº•å´©æºƒï¼ˆcash < -10ï¼‰";
      }
      if (state.supply < -20) {
        return "ä¾›åº”é“¾æ–­è£‚ï¼ˆsupply < -20ï¼‰";
      }
      if (state.team < -15) {
        return "æ ¸å¿ƒå›¢é˜Ÿæ•£æ‰ï¼ˆteam < -15ï¼‰";
      }
      return null;
    }

    function evaluateEnding() {
      const deathReason = isBankrupt();
      if (deathReason) {
        return {
          title: "ã€ç»“å±€ï¼šç ´äº§ã€‘",
          text: `åŸå› ï¼š${deathReason}\nä½ æ²¡èƒ½èµ°å®Œå¥ˆç‰¹çš„åˆ›ä¸šä¹‹è·¯ã€‚`
        };
      }

      const power =
        state.brand * 1.5 +
        state.growth * 1.2 +
        state.supply * 1.0 +
        state.team * 1.0 +
        state.cash * 0.8 -
        state.risk * 0.5;

      if (power >= 220 && state.brand >= 80 && state.growth >= 60) {
        return {
          title: "ã€ç»“å±€ï¼šè¶…è¶Šè€å…‹ã€‘",
          text: "ä½ æ‰“é€ äº†ä¸€ä¸ªå…¨çƒç¬¬ä¸€çš„è¿åŠ¨å“ç‰Œï¼Œç”šè‡³è¶…è¿‡äº†è€å…‹æœ¬å°Šã€‚"
        };
      } else if (power >= 180 && state.brand >= 70) {
        return {
          title: "ã€ç»“å±€ï¼šå…¨çƒè¿åŠ¨å·¨å¤´ã€‘",
          text: "ä½ æˆåŠŸå¤åˆ¶äº†å¥ˆç‰¹çš„é“è·¯ï¼Œæˆä¸ºä¸–ç•Œçº§è¿åŠ¨å“ç‰Œã€‚"
        };
      } else if (power >= 130 && state.brand >= 50) {
        return {
          title: "ã€ç»“å±€ï¼šä¸­å›½é¡¶çº§è¿åŠ¨å“ç‰Œã€‘",
          text: "ä½ ç±»ä¼¼å®‰è¸ / æå®ï¼Œæˆä¸ºä¸­å›½æ•°ä¸€æ•°äºŒçš„è¿åŠ¨å“ç‰Œã€‚"
        };
      } else if (power >= 90) {
        return {
          title: "ã€ç»“å±€ï¼šåŒºåŸŸçŸ¥åå“ç‰Œã€‘",
          text: "ä½ åœ¨æœ¬å›½ / éƒ¨åˆ†åŒºåŸŸéå¸¸æœ‰åï¼Œä½†è¿˜æ²¡èµ°å‘çœŸæ­£å…¨çƒåŒ–ã€‚"
        };
      } else if (power >= 50) {
        return {
          title: "ã€ç»“å±€ï¼šæ´»ä¸‹æ¥çš„å°å…¬å¸ã€‘",
          text: "ä½ æ²¡æœ‰æ­»ï¼Œä½†ä¹Ÿæ²¡æœ‰åšå¤§ï¼Œç®—æ˜¯æœ‰å°Šä¸¥åœ°æ´»ç€çš„å°ä¼ä¸šã€‚"
        };
      } else {
        return {
          title: "ã€ç»“å±€ï¼šå‹‰å¼ºå­˜æ´»ã€‘",
          text: "ä½ è‰°éš¾æ´»ç€ï¼Œç¦»ç ´äº§åªæœ‰ä¸€æ­¥ä¹‹é¥ã€‚"
        };
      }
    }

    function appendLog(questionId, choiceKey, effects) {
      const log = document.getElementById("log");
      const line = document.createElement("div");
      line.textContent =
        `ç¬¬ ${questionId} å…³ é€‰æ‹© ${choiceKey}ï¼š` +
        `cash ${effects.cash || 0}, supply ${effects.supply || 0}, ` +
        `brand ${effects.brand || 0}, team ${effects.team || 0}, ` +
        `growth ${effects.growth || 0}, risk ${effects.risk || 0}`;
      log.appendChild(line);
      log.scrollTop = log.scrollHeight;
    }

    function renderQuestion() {
      const roundInfo = document.getElementById("round-info");
      const total = questions.length;
      const q = questions[currentIndex];

      roundInfo.textContent = `ç¬¬ ${q.id} å…³ / å…± ${total} å…³`;
      document.getElementById("question-id").textContent = `Q${q.id}`;
      document.getElementById("question-text").textContent = q.text;

      const optionList = document.getElementById("option-list");
      optionList.innerHTML = "";

      for (const key of ["A", "B", "C", "D"]) {
        const opt = q.options[key];
        if (!opt) continue;
        const btn = document.createElement("button");
        btn.className = "option-btn";
        btn.innerHTML = `<span class="key">${key}</span><span>${opt.text}</span>`;
        btn.onclick = () => handleChoice(key);
        optionList.appendChild(btn);
      }

      updateStatsView();
    }

    function handleChoice(key) {
      const q = questions[currentIndex];
      const opt = q.options[key];
      const effects = opt.effects || {};

      // æ›´æ–°çŠ¶æ€
      state.cash += effects.cash || 0;
      state.supply += effects.supply || 0;
      state.brand += effects.brand || 0;
      state.team += effects.team || 0;
      state.growth += effects.growth || 0;
      state.risk += effects.risk || 0;

      state.history.push({
        question: q.id,
        option: key,
        effects
      });

      appendLog(q.id, key, effects);
      updateStatsView();

      // æ£€æŸ¥æ­»äº¡
      const deathReason = isBankrupt();
      if (deathReason) {
        // ç›´æ¥ç»“æŸ
        endGame();
        return;
      }

      // ä¸‹ä¸€é¢˜
      currentIndex++;
      if (currentIndex >= questions.length) {
        endGame();
      } else {
        renderQuestion();
      }
    }

    function endGame() {
      const optionList = document.getElementById("option-list");
      optionList.innerHTML = "";

      const resultBlock = document.getElementById("result-block");
      const r = evaluateEnding();
      document.getElementById("result-title").textContent = r.title;
      document.getElementById("result-text").textContent =
        r.text + `\n\næœ€ç»ˆçŠ¶æ€ï¼š\n` +
        `ğŸ’° cash=${state.cash}\nğŸ“¦ supply=${state.supply}\n` +
        `ğŸ§² brand=${state.brand}\nğŸ§‘â€ğŸ¤â€ğŸ§‘ team=${state.team}\n` +
        `ğŸ“ˆ growth=${state.growth}\nğŸŒª risk=${state.risk}`;
      resultBlock.style.display = "block";

      document.getElementById("question-id").textContent = "æ¸¸æˆç»“æŸ";
      document.getElementById("question-text").textContent =
        "ä½ å·²å®Œæˆå…¨éƒ¨å…³é”®æŠ‰æ‹©ã€‚çœ‹çœ‹ä½ èµ°åˆ°äº†å“ªä¸€æ­¥ï¼Ÿ";
    }

    // åˆå§‹åŒ–
    renderQuestion();
  </script>
</body>
</html>

